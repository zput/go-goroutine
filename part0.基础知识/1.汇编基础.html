
<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>第一部分 基础知识 · golang goroutine详解</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="zput">
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-anchor-navigation-ex/style/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="1.汇编基础.html" />
    
    
    <link rel="prev" href="../" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    
    
        
        <li>
            <a href="https://zput.github.io" target="_blank" class="custom-link">zput|堆排序</a>
        </li>
    
    

    
    <li class="divider"></li>
    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../">
            
                <a href="../">
            
                    
                    大纲
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.3" data-path="1.汇编基础.html">
            
                <a href="1.汇编基础.html">
            
                    
                    第一部分 基础知识
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.3.1" data-path="1.汇编基础.html">
            
                <a href="1.汇编基础.html">
            
                    
                    汇编基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="2.内存.html">
            
                <a href="2.内存.html">
            
                    
                    内存
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../part1.进入main函数之前的初始化/1.进入main函数之前的初始化.html">
            
                <a href="../part1.进入main函数之前的初始化/1.进入main函数之前的初始化.html">
            
                    
                    第二部分 进入main函数之前的初始化
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../part1.进入main函数之前的初始化/1.进入main函数之前的初始化.html">
            
                <a href="../part1.进入main函数之前的初始化/1.进入main函数之前的初始化.html">
            
                    
                    进入main函数之前的初始化
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../part2.退出goroutine/1.退出goroutine.html">
            
                <a href="../part2.退出goroutine/1.退出goroutine.html">
            
                    
                    第三部分 退出goroutine
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../part2.退出goroutine/1.退出goroutine.html">
            
                <a href="../part2.退出goroutine/1.退出goroutine.html">
            
                    
                    退出goroutine
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" >
            
                <span>
            
                    
                    第四部分 调度
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../part3.调度/1.调度策略/1.1.从本地队列或全局队列获取goroutine.html">
            
                <a href="../part3.调度/1.调度策略/1.1.从本地队列或全局队列获取goroutine.html">
            
                    
                    1.调度策略
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1.1" data-path="../part3.调度/1.调度策略/1.1.从本地队列或全局队列获取goroutine.html">
            
                <a href="../part3.调度/1.调度策略/1.1.从本地队列或全局队列获取goroutine.html">
            
                    
                    从本地队列或全局队列获取goroutine
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.1.2" data-path="../part3.调度/1.调度策略/1.2.盗取goroutine从其他队列.html">
            
                <a href="../part3.调度/1.调度策略/1.2.盗取goroutine从其他队列.html">
            
                    
                    盗取goroutine从其他队列
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../part3.调度/2.调度的时机/2.1.主动调度.html">
            
                <a href="../part3.调度/2.调度的时机/2.1.主动调度.html">
            
                    
                    2.调度的时机
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.2.1" data-path="../part3.调度/2.调度的时机/2.1.主动调度.html">
            
                <a href="../part3.调度/2.调度的时机/2.1.主动调度.html">
            
                    
                    主动调度
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2.2" data-path="../part3.调度/2.调度的时机/2.2.被动调度.html">
            
                <a href="../part3.调度/2.调度的时机/2.2.被动调度.html">
            
                    
                    被动调度
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2.3" data-path="../part3.调度/2.调度的时机/2.3.1.运行用户代码时间过长调度.html">
            
                <a href="../part3.调度/2.调度的时机/2.3.1.运行用户代码时间过长调度.html">
            
                    
                    运行用户代码时间过长调度
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2.4" data-path="../part3.调度/2.调度的时机/2.3.2.系统调用收尾,如果从系统调用返回,如何重新得到P.html">
            
                <a href="../part3.调度/2.调度的时机/2.3.2.系统调用收尾,如果从系统调用返回,如何重新得到P.html">
            
                    
                    系统调用收尾,如果从系统调用返回,如何重新得到P
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../part3.调度/3.调度循环/3.3.调度循环.html">
            
                <a href="../part3.调度/3.调度循环/3.3.调度循环.html">
            
                    
                    3.调度循环
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.3.1" data-path="../part3.调度/3.调度循环/3.3.调度循环.html">
            
                <a href="../part3.调度/3.调度循环/3.3.调度循环.html">
            
                    
                    调度循环
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../part3.调度/总结.html">
            
                <a href="../part3.调度/总结.html">
            
                    
                    总结
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本书使用 GitBook 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >第一部分 基础知识</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div id="anchor-navigation-ex-navbar"><i class="fa fa-navicon"></i><ul><li><span class="title-icon "></span><a href="#go&#x6C47;&#x7F16;"><b>1. </b>go&#x6C47;&#x7F16;</a></li><ul><li><span class="title-icon "></span><a href="#&#x4F2A;&#x5BC4;&#x5B58;&#x5668;"><b>1.1. </b>&#x4F2A;&#x5BC4;&#x5B58;&#x5668;</a></li><li><span class="title-icon "></span><a href="#&#x7F16;&#x8BD1;&#x53CD;&#x7F16;&#x8BD1;&#x547D;&#x4EE4;"><b>1.2. </b>&#x7F16;&#x8BD1;/&#x53CD;&#x7F16;&#x8BD1;&#x547D;&#x4EE4;</a></li><ul><li><span class="title-icon "></span><a href="#&#x4E00;&#x4E9B;&#x6C47;&#x7F16;&#x9700;&#x8981;&#x7684;&#x5E38;&#x89C1;&#x7684;&#x6307;&#x4EE4;"><b>1.2.1. </b>&#x4E00;&#x4E9B;&#x6C47;&#x7F16;&#x9700;&#x8981;&#x7684;&#x5E38;&#x89C1;&#x7684;&#x6307;&#x4EE4;</a></li></ul><li><span class="title-icon "></span><a href="#&#x51FD;&#x6570;"><b>1.3. </b>&#x51FD;&#x6570;</a></li><ul><li><span class="title-icon "></span><a href="#&#x5404;&#x8BED;&#x8A00;&#x51FD;&#x6570;&#x8C03;&#x7528;&#x5806;&#x6808;"><b>1.3.1. </b>&#x5404;&#x8BED;&#x8A00;&#x51FD;&#x6570;&#x8C03;&#x7528;&#x5806;&#x6808;</a></li><li><span class="title-icon "></span><a href="#go&#x7684;&#x51FD;&#x6570;&#x8C03;&#x7528;&#x5806;&#x6808;"><b>1.3.2. </b>go&#x7684;&#x51FD;&#x6570;&#x8C03;&#x7528;&#x5806;&#x6808;</a></li><li><span class="title-icon "></span><a href="#&#x4F8B;&#x5B50;"><b>1.3.3. </b>&#x4F8B;&#x5B50;</a></li><li><span class="title-icon "></span><a href="#&#x6269;&#x5C55;"><b>1.3.4. </b>&#x6269;&#x5C55;</a></li></ul><li><span class="title-icon "></span><a href="#&#x4ECE;&#x51FD;&#x6570;&#x4E2D;&#x6269;&#x5C55;&#x51FA;&#x6765;&#x7684;&#x5468;&#x8FB9;&#x77E5;&#x8BC6;"><b>1.4. </b>&#x4ECE;&#x51FD;&#x6570;&#x4E2D;&#x6269;&#x5C55;&#x51FA;&#x6765;&#x7684;&#x5468;&#x8FB9;&#x77E5;&#x8BC6;</a></li><ul><li><span class="title-icon "></span><a href="#&#x51FD;&#x6570;&#x7684;&#x5B9A;&#x4E49;"><b>1.4.1. </b>&#x51FD;&#x6570;&#x7684;&#x5B9A;&#x4E49;</a></li><li><span class="title-icon "></span><a href="#&#x53D8;&#x91CF;&#x58F0;&#x660E;"><b>1.4.2. </b>&#x53D8;&#x91CF;&#x58F0;&#x660E;</a></li><li><span class="title-icon "></span><a href="#&#x6307;&#x4EE4;&#x6C47;&#x603B;"><b>1.4.3. </b>&#x6307;&#x4EE4;&#x6C47;&#x603B;</a></li><li><span class="title-icon "></span><a href="#&#x5B8F;"><b>1.4.4. </b>&#x5B8F;</a></li></ul><li><span class="title-icon "></span><a href="#buildin&#x7C7B;&#x578B;"><b>1.5. </b>buildin&#x7C7B;&#x578B;</a></li><ul><li><span class="title-icon "></span><a href="#string"><b>1.5.1. </b>string</a></li></ul><li><span class="title-icon "></span><a href="#&#x9644;&#x5F55;"><b>1.6. </b>&#x9644;&#x5F55;</a></li></ul></ul></div><a href="#go&#x6C47;&#x7F16;" id="anchorNavigationExGoTop"><i class="fa fa-arrow-up"></i></a><h1 id="go&#x6C47;&#x7F16;"><a name="go&#x6C47;&#x7F16;" class="anchor-navigation-ex-anchor" href="#go&#x6C47;&#x7F16;"><i class="fa fa-link" aria-hidden="true"></i></a>1. go&#x6C47;&#x7F16;</h1>
<h2 id="&#x4F2A;&#x5BC4;&#x5B58;&#x5668;"><a name="&#x4F2A;&#x5BC4;&#x5B58;&#x5668;" class="anchor-navigation-ex-anchor" href="#&#x4F2A;&#x5BC4;&#x5B58;&#x5668;"><i class="fa fa-link" aria-hidden="true"></i></a>1.1. &#x4F2A;&#x5BC4;&#x5B58;&#x5668;</h2>
<p><a href="https://golang.org/doc/asm#symbols" target="_blank">A Quick Guide to Go&apos;s Assembler</a></p>
<pre><code class="lang-go">FP: Frame pointer: arguments and locals.
PC: Program counter: jumps and branches.
SB: Static base pointer: global symbols.
SP: Stack pointer: top of stack.
</code></pre>
<ul>
<li>FP&#x4F2A;&#x5BC4;&#x5B58;&#x5668;<ul>
<li>FP&#x4F2A;&#x5BC4;&#x5B58;&#x5668;&#xFF1A; &#x7528;&#x6765;&#x6807;&#x8BC6;&#x51FD;&#x6570;&#x53C2;&#x6570;&#x3001;&#x8FD4;&#x56DE;&#x503C;</li>
</ul>
</li>
<li>SP&#x6709;&#x4F2A;SP&#x548C;&#x786C;&#x4EF6;SP&#x7684;&#x533A;&#x5206;&#xFF1A;<ul>
<li>&#x4F2A;SP&#xFF1A; &#x672C;&#x5730;&#x53D8;&#x91CF;&#x6700;&#x9AD8;&#x8D77;&#x59CB;&#x5730;&#x5740;</li>
<li>&#x786C;&#x4EF6;SP&#xFF1A; &#x51FD;&#x6570;&#x6808;&#x771F;&#x5B9E;&#x6808;&#x9876;&#x5730;&#x5740;</li>
</ul>
</li>
<li>SP&#x4E0E;FP&#x7684;&#x5173;&#x7CFB;<ul>
<li>FP&#x662F;&#x8BBF;&#x95EE;&#x5165;&#x53C2;&#x3001;&#x51FA;&#x53C2;&#x7684;&#x57FA;&#x5740;&#xFF0C;&#x4E00;&#x822C;&#x7528;<strong>&#x6B63;&#x5411;&#x504F;&#x79FB;</strong>&#x6765;&#x5BFB;&#x5740;.</li>
<li>SP&#x662F;&#x8BBF;&#x95EE;&#x672C;&#x5730;&#x53D8;&#x91CF;&#x7684;&#x8D77;&#x59CB;&#x57FA;&#x5740;&#xFF0C;&#x4E00;&#x822C;&#x7528;<strong>&#x8D1F;&#x5411;&#x504F;&#x79FB;</strong>&#x6765;&#x5BFB;&#x5740;.</li>
<li>&#x4FEE;&#x6539;&#x786C;&#x4EF6;SP&#xFF0C;&#x4F1A;&#x5F15;&#x8D77;&#x4F2A;SP&#x3001;FP&#x540C;&#x6B65;&#x53D8;&#x5316;<code>SUBQ $16, SP // &#x8FD9;&#x91CC;golang&#x89E3;&#x5F15;&#x7528;&#x65F6;&#xFF0C;&#x4F2A;SP/FP&#x90FD;&#x4F1A;-16</code></li>
</ul>
</li>
<li>&#x53C2;&#x6570;/&#x672C;&#x5730;&#x53D8;&#x91CF;&#x8BBF;&#x95EE;<ul>
<li>&#x901A;&#x8FC7;symbol+/-offset(FP/SP)&#x7684;&#x65B9;&#x5F0F;&#x8FDB;&#x884C;&#x4F7F;&#x7528;: <code>&#x4F8B;&#x5982;arg0+0(FP)&#x8868;&#x793A;&#x7B2C;&#x51FD;&#x6570;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x5176;&#x5B9E;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;arg1+8(FP)&#x8868;&#x793A;&#x51FD;&#x6570;&#x53C2;&#x6570;&#x504F;&#x79FB;8byte&#x7684;&#x53E6;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x3002;arg0/arg1&#x7528;&#x4E8E;&#x52A9;&#x8BB0;&#xFF0C;&#x4F46;&#x662F;&#x5FC5;&#x987B;&#x5B58;&#x5728;&#xFF0C;&#x5426;&#x5219;&#x65E0;&#x6CD5;&#x901A;&#x8FC7;&#x7F16;&#x8BD1;&#xFF08;golang&#x4F1A;&#x8BC6;&#x522B;&#x5E76;&#x505A;&#x5904;&#x7406;&#xFF09;&#x3002;</code></li>
<li>&#x5176;&#x4E2D;&#x5BF9;&#x4E8E;SP&#x6765;&#x8BF4;&#xFF0C;&#x8FD8;&#x6709;&#x4E00;&#x79CD;&#x8BBF;&#x95EE;&#x65B9;&#x5F0F;&#xFF1A; <code>+/-offset(FP) &#x8FD9;&#x91CC;SP&#x524D;&#x9762;&#x6CA1;&#x6709;symbol&#x4FEE;&#x9970;&#xFF0C;&#x4EE3;&#x8868;&#x8FD9;&#x786C;&#x4EF6;SP</code></li>
</ul>
</li>
</ul>
<h4 id="fp"><a name="fp" class="anchor-navigation-ex-anchor" href="#fp"><i class="fa fa-link" aria-hidden="true"></i></a>FP</h4>
<blockquote>
<p>FP&#x4F2A;&#x5BC4;&#x5B58;&#x5668;&#x662F;&#x4E00;&#x4E2A;&#x7528;&#x4E8E;&#x5F15;&#x7528;&#x51FD;&#x6570;&#x53C2;&#x6570;&#x7684;&#x865A;&#x62DF;&#x5E27;&#x6307;&#x9488;&#x3002;&#x7F16;&#x8BD1;&#x5668;&#x7EF4;&#x62A4;&#x4E00;&#x4E2A;&#x865A;&#x62DF;&#x5E27;&#x6307;&#x9488;&#xFF0C;&#x5E76;&#x5C06;&#x5806;&#x6808;&#x4E0A;&#x7684;&#x53C2;&#x6570;&#x5F15;&#x7528;&#x4E3A;&#x8BE5;&#x4F2A;&#x5BC4;&#x5B58;&#x5668;&#x7684;&#x504F;&#x79FB;&#x91CF;&#x3002;&#x56E0;&#x6B64;0(FP)&#x662F;&#x51FD;&#x6570;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;8(FP)&#x662F;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;(&#x5728;64&#x4F4D;&#x673A;&#x5668;&#x4E0A;)&#xFF0C;&#x4EE5;&#x6B64;&#x7C7B;&#x63A8;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x5F53;&#x4EE5;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x5F15;&#x7528;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x53C2;&#x6570;&#x65F6;&#xFF0C;&#x6709;&#x5FC5;&#x8981;&#x5C06;&#x540D;&#x79F0;&#x653E;&#x5728;&#x5F00;&#x5934;&#xFF0C;&#x5982;first_arg+0(FP)&#x548C;second_arg+8(FP)&#x3002;(&#x504F;&#x79FB;&#x91CF;&#x7684;&#x542B;&#x4E49;--&#x4ECE;&#x5E27;&#x6307;&#x9488;&#x51FA;&#x53D1;&#x7684;&#x504F;&#x79FB;&#x91CF;--&#x4E0E;&#x5B83;&#x5728;SB&#x4E2D;&#x7684;&#x4F7F;&#x7528;&#x4E0D;&#x540C;&#xFF0C;&#x5728;SB&#x4E2D;&#xFF0C;&#x5B83;&#x662F;&#x4ECE;&#x7B26;&#x53F7;&#x51FA;&#x53D1;&#x7684;&#x504F;&#x79FB;&#x91CF;&#x3002;) &#x6C47;&#x7F16;&#x5668;&#x5F3A;&#x5236;&#x6267;&#x884C;&#x8FD9;&#x4E2A;&#x7EA6;&#x5B9A;&#xFF0C;&#x62D2;&#x7EDD;&#x666E;&#x901A;&#x7684;0(FP)&#x548C;8(FP)&#x3002;&#x5B9E;&#x9645;&#x7684;&#x540D;&#x79F0;&#x5728;&#x8BED;&#x4E49;&#x4E0A;&#x662F;&#x4E0D;&#x76F8;&#x5173;&#x7684;&#xFF0C;&#x4F46;&#x5E94;&#x8BE5;&#x7528;&#x6765;&#x8BB0;&#x5F55;&#x53C2;&#x6570;&#x7684;&#x540D;&#x79F0;&#x3002;&#x503C;&#x5F97;&#x5F3A;&#x8C03;&#x7684;&#x662F;&#xFF0C;FP&#x59CB;&#x7EC8;&#x662F;&#x4E00;&#x4E2A;&#x4F2A;&#x5BC4;&#x5B58;&#x5668;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x786C;&#x4EF6;&#x5BC4;&#x5B58;&#x5668;&#xFF0C;&#x5373;&#x4F7F;&#x5728;&#x5177;&#x6709;&#x786C;&#x4EF6;&#x5E27;&#x6307;&#x9488;&#x7684;&#x67B6;&#x6784;&#x4E0A;&#x4E5F;&#x662F;&#x5982;&#x6B64;&#x3002;</p>
<p>The FP pseudo-register is a virtual frame pointer used to refer to function arguments. The compilers maintain a virtual frame pointer and refer to the arguments on the stack as offsets from that pseudo-register. Thus 0(FP) is the first argument to the function, 8(FP) is the second (on a 64-bit machine), and so on. However, when referring to a function argument this way, it is necessary to place a name at the beginning, as in first_arg+0(FP) and second_arg+8(FP). (The meaning of the offset&#x2014;offset from the frame pointer&#x2014;distinct from its use with SB, where it is an offset from the symbol.) The assembler enforces this convention, rejecting plain 0(FP) and 8(FP). The actual name is semantically irrelevant but should be used to document the argument&apos;s name. It is worth stressing that FP is always a pseudo-register, not a hardware register, even on architectures with a hardware frame pointer.</p>
<p>&#x5BF9;&#x4E8E;&#x5E26;&#x6709;Go&#x539F;&#x578B;&#x7684;&#x6C47;&#x7F16;&#x51FD;&#x6570;&#xFF0C;go vet&#x4F1A;&#x68C0;&#x67E5;&#x53C2;&#x6570;&#x540D;&#x548C;&#x504F;&#x79FB;&#x91CF;&#x662F;&#x5426;&#x5339;&#x914D;&#x3002;&#x5728;32&#x4F4D;&#x7CFB;&#x7EDF;&#x4E0A;&#xFF0C;64&#x4F4D;&#x503C;&#x7684;&#x4F4E;&#x4F4D;&#x548C;&#x9AD8;&#x4F4D;32&#x4F4D;&#x662F;&#x901A;&#x8FC7;&#x5728;&#x540D;&#x79F0;&#x4E2D;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;_lo&#x6216;_hi&#x540E;&#x7F00;&#x6765;&#x533A;&#x5206;&#x7684;&#xFF0C;&#x5982;arg_lo+0(FP)&#x6216;arg_hi+4(FP)&#x3002;&#x5982;&#x679C;&#x4E00;&#x4E2A;Go&#x539F;&#x578B;&#x6CA1;&#x6709;&#x7ED9;&#x5B83;&#x7684;&#x7ED3;&#x679C;&#x547D;&#x540D;&#xFF0C;&#x90A3;&#x4E48;&#x9884;&#x671F;&#x7684;&#x6C47;&#x7F16;&#x540D;&#x662F;ret&#x3002;</p>
<p>For assembly functions with Go prototypes, go vet will check that the argument names and offsets match. On 32-bit systems, the low and high 32 bits of a 64-bit value are distinguished by adding a _lo or _hi suffix to the name, as in arg_lo+0(FP) or arg_hi+4(FP). If a Go prototype does not name its result, the expected assembly name is ret.</p>
</blockquote>
<h4 id="sp"><a name="sp" class="anchor-navigation-ex-anchor" href="#sp"><i class="fa fa-link" aria-hidden="true"></i></a>SP</h4>
<blockquote>
<p>SP&#x4F2A;&#x5BC4;&#x5B58;&#x5668;&#x662F;&#x4E00;&#x4E2A;&#x865A;&#x62DF;&#x6808;&#x6307;&#x9488;&#xFF0C;&#x7528;&#x4E8E;&#x5F15;&#x7528;&#x5E27;&#x672C;&#x5730;&#x53D8;&#x91CF;&#x548C;&#x4E3A;&#x51FD;&#x6570;&#x8C03;&#x7528;&#x51C6;&#x5907;&#x7684;&#x53C2;&#x6570;&#x3002;&#x5B83;&#x6307;&#x5411;&#x672C;&#x5730;&#x6808;&#x5E27;&#x7684;&#x9876;&#x90E8;&#xFF0C;&#x6240;&#x4EE5;&#x5F15;&#x7528;&#x65F6;&#x5E94;&#x4F7F;&#x7528;&#x8D1F;&#x504F;&#x79FB;&#x91CF;&#xFF0C;&#x8303;&#x56F4;&#x4E3A;[-framesize&#xFF0C;0)&#xFF1A;x-8(SP)&#xFF0C;y-4(SP)&#xFF0C;&#x4EE5;&#x6B64;&#x7C7B;&#x63A8;&#x3002;</p>
<p>The SP pseudo-register is a virtual stack pointer used to refer to frame-local variables and the arguments being prepared for function calls. It points to the top of the local stack frame, so references should use negative offsets in the range [&#x2212;framesize, 0): x-8(SP), y-4(SP), and so on.</p>
<p>&#x5728;&#x5177;&#x6709;&#x540D;&#x4E3A;SP&#x7684;&#x786C;&#x4EF6;&#x5BC4;&#x5B58;&#x5668;&#x7684;&#x67B6;&#x6784;&#x4E0A;&#xFF0C;&#x540D;&#x79F0;&#x524D;&#x7F00;&#x53EF;&#x4EE5;&#x533A;&#x5206;&#x5BF9;&#x865A;&#x62DF;&#x6808;&#x6307;&#x9488;&#x7684;&#x5F15;&#x7528;&#x548C;&#x5BF9;&#x67B6;&#x6784;SP&#x5BC4;&#x5B58;&#x5668;&#x7684;&#x5F15;&#x7528;&#xFF0C;&#x5373;x-8(SP)&#xFF0C;y-4(SP)&#xFF0C;&#x4EE5;&#x6B64;&#x7C7B;&#x63A8;&#x3002;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;x-8(SP)&#x548C;-8(SP)&#x662F;&#x4E0D;&#x540C;&#x7684;&#x5185;&#x5B58;&#x4F4D;&#x7F6E;&#xFF1A;&#x7B2C;&#x4E00;&#x4E2A;&#x662F;&#x6307;&#x865A;&#x62DF;&#x6808;&#x6307;&#x9488;&#x4F2A;&#x5BC4;&#x5B58;&#x5668;&#xFF0C;&#x800C;&#x7B2C;&#x4E8C;&#x4E2A;&#x662F;&#x6307;&#x786C;&#x4EF6;&#x7684;SP&#x5BC4;&#x5B58;&#x5668;&#x3002;</p>
<p>On architectures with a hardware register named SP, the name prefix distinguishes references to the virtual stack pointer from references to the architectural SP register. That is, x-8(SP) and -8(SP) are different memory locations: the first refers to the virtual stack pointer pseudo-register, while the second refers to the hardware&apos;s SP register.</p>
</blockquote>
<ul>
<li>&#x603B;&#x7ED3;&#x4E0B;&#xFF1A;<ul>
<li>&#x5982;&#x4F55;&#x7406;&#x89E3;&#x4F2A;&#x5BC4;&#x5B58;&#x5668;FP&#x548C;SP&#x5462;&#xFF1F;&#x5176;&#x5B9E;&#x4F2A;&#x5BC4;&#x5B58;&#x5668;FP&#x548C;SP&#x76F8;&#x5F53;&#x4E8E;plan9&#x4F2A;&#x6C47;&#x7F16;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x52A9;&#x8BB0;&#x7B26;&#xFF0C;&#x4ED6;&#x4EEC;&#x662F;&#x6839;&#x636E;&#x5F53;&#x524D;&#x51FD;&#x6570;&#x6808;&#x7A7A;&#x95F4;&#x8BA1;&#x7B97;&#x51FA;&#x6765;&#x7684;&#x4E00;&#x4E2A;&#x76F8;&#x5BF9;&#x4E8E;&#x7269;&#x7406;&#x5BC4;&#x5B58;&#x5668;SP&#x7684;&#x4E00;&#x4E2A;&#x504F;&#x79FB;&#x91CF;&#x5750;&#x6807;&#x3002;</li>
<li>&#x4F2A;SP&#x548C;FP&#x7684;&#x76F8;&#x5BF9;&#x4F4D;&#x7F6E;&#x662F;&#x4F1A;&#x53D8;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x4E0D;&#x5E94;&#x8BE5;&#x5C1D;&#x8BD5;&#x7528;&#x4F2A;SP&#x5BC4;&#x5B58;&#x5668;&#x53BB;&#x627E;&#x90A3;&#x4E9B;&#x7528;FP+offset&#x6765;&#x5F15;&#x7528;&#x7684;&#x503C;&#xFF0C;&#x4F8B;&#x5982;&#x51FD;&#x6570;&#x7684;&#x5165;&#x53C2;&#x548C;&#x8FD4;&#x56DE;&#x503C;&#x3002;</li>
<li>&#x5B98;&#x65B9;&#x6587;&#x6863;&#x4E2D;&#x8BF4;&#x7684;&#x4F2A;SP&#x6307;&#x5411;stack&#x7684;top&#xFF0C;&#x662F;&#x6709;&#x95EE;&#x9898;&#x7684;&#x3002;&#x5176;&#x6307;&#x5411;&#x7684;&#x5C40;&#x90E8;&#x53D8;&#x91CF;&#x4F4D;&#x7F6E;&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x6574;&#x4E2A;&#x6808;&#x7684;&#x6808;&#x5E95;&#xFF08;&#x9664;caller BP &#x4E4B;&#x5916;&#xFF09;&#xFF0C;&#x6240;&#x4EE5;&#x8BF4;bottom&#x66F4;&#x5408;&#x9002;&#x4E00;&#x4E9B;&#x3002;</li>
<li><code>MOVQ    0(SP), AX // f&apos;s PC</code>,&#x8FD9;&#x79CD;&#x524D;&#x9762;&#x6CA1;&#x6709;flags&#x7684;&#xFF0C;&#x5B83;&#x76F8;&#x5F53;&#x4E8E;&#x5B9E;&#x9645;&#x7684;&#x5BC4;&#x5B58;&#x5668;&#x7684;&#x503C;&#xFF0C;&#x4E0D;&#x662F;&#x4F2A;&#x5BC4;&#x5B58;&#x5668;&#x4E86;&#x3002;</li>
</ul>
</li>
</ul>
<h2 id="&#x7F16;&#x8BD1;&#x53CD;&#x7F16;&#x8BD1;&#x547D;&#x4EE4;"><a name="&#x7F16;&#x8BD1;&#x53CD;&#x7F16;&#x8BD1;&#x547D;&#x4EE4;" class="anchor-navigation-ex-anchor" href="#&#x7F16;&#x8BD1;&#x53CD;&#x7F16;&#x8BD1;&#x547D;&#x4EE4;"><i class="fa fa-link" aria-hidden="true"></i></a>1.2. &#x7F16;&#x8BD1;/&#x53CD;&#x7F16;&#x8BD1;&#x547D;&#x4EE4;</h2>
<pre><code class="lang-sh">//&#x7F16;&#x8BD1;
go build -gcflags=<span class="hljs-string">&quot;-S&quot;</span>
go tool compile -S hello.go
go tool compile -N -S hello.go // &#x7981;&#x6B62;&#x4F18;&#x5316;,&#x9632;&#x6B62;&#x51FD;&#x6570;&#x88AB;&#x4F18;&#x5316;&#x3002;
//&#x53CD;&#x7F16;&#x8BD1;
go tool objdump &lt;binary&gt;
</code></pre>
<h3 id="&#x4E00;&#x4E9B;&#x6C47;&#x7F16;&#x9700;&#x8981;&#x7684;&#x5E38;&#x89C1;&#x7684;&#x6307;&#x4EE4;"><a name="&#x4E00;&#x4E9B;&#x6C47;&#x7F16;&#x9700;&#x8981;&#x7684;&#x5E38;&#x89C1;&#x7684;&#x6307;&#x4EE4;" class="anchor-navigation-ex-anchor" href="#&#x4E00;&#x4E9B;&#x6C47;&#x7F16;&#x9700;&#x8981;&#x7684;&#x5E38;&#x89C1;&#x7684;&#x6307;&#x4EE4;"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.1. &#x4E00;&#x4E9B;&#x6C47;&#x7F16;&#x9700;&#x8981;&#x7684;&#x5E38;&#x89C1;&#x7684;&#x6307;&#x4EE4;</h3>
<pre><code class="lang-sh">go build  -gcflags <span class="hljs-string">&quot;-N -l&quot;</span> -o <span class="hljs-built_in">test</span> .

info files 
info registers sp bp
info breakpoint

x/10x
<span class="hljs-built_in">help</span> x

x/16xb 0x7fffffffe470
[https://visualgdb.com/gdbreference/commands/x]

info register rbp rsp pc

display /20i <span class="hljs-variable">$pc</span>
</code></pre>
<p><a href="https://blog.csdn.net/counsellor/article/details/100034080" target="_blank">https://blog.csdn.net/counsellor/article/details/100034080</a></p>
<h2 id="&#x51FD;&#x6570;"><a name="&#x51FD;&#x6570;" class="anchor-navigation-ex-anchor" href="#&#x51FD;&#x6570;"><i class="fa fa-link" aria-hidden="true"></i></a>1.3. &#x51FD;&#x6570;</h2>
<h3 id="&#x5404;&#x8BED;&#x8A00;&#x51FD;&#x6570;&#x8C03;&#x7528;&#x5806;&#x6808;"><a name="&#x5404;&#x8BED;&#x8A00;&#x51FD;&#x6570;&#x8C03;&#x7528;&#x5806;&#x6808;" class="anchor-navigation-ex-anchor" href="#&#x5404;&#x8BED;&#x8A00;&#x51FD;&#x6570;&#x8C03;&#x7528;&#x5806;&#x6808;"><i class="fa fa-link" aria-hidden="true"></i></a>1.3.1. &#x5404;&#x8BED;&#x8A00;&#x51FD;&#x6570;&#x8C03;&#x7528;&#x5806;&#x6808;</h3>
<h4 id="c&#x8BED;&#x8A00;"><a name="c&#x8BED;&#x8A00;" class="anchor-navigation-ex-anchor" href="#c&#x8BED;&#x8A00;"><i class="fa fa-link" aria-hidden="true"></i></a>c&#x8BED;&#x8A00;</h4>
<blockquote>
<p>main.c</p>
<pre><code class="lang-c"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">sub</span><span class="hljs-params">(<span class="hljs-keyword">int</span> first, <span class="hljs-keyword">int</span> second)</span>
</span>{
    <span class="hljs-keyword">return</span> first-second;
}
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">int</span> result = sub(<span class="hljs-number">2</span>,<span class="hljs-number">1</span>);
}
</code></pre>
</blockquote>
<p>&#x4F7F;&#x7528;<code>gcc -S main.c</code></p>
<pre><code>    .file    &quot;main.c&quot;
    .text
    .globl    sub
    .type    sub, @function
sub:
.LFB0:
    .cfi_startproc
    pushq    %rbp
    .cfi_def_cfa_offset 16
    .cfi_offset 6, -16
    movq    %rsp, %rbp
    .cfi_def_cfa_register 6
    movl    %edi, -4(%rbp)
    movl    %esi, -8(%rbp)
    movl    -4(%rbp), %eax
    subl    -8(%rbp), %eax
    popq    %rbp
    .cfi_def_cfa 7, 8
    ret
    .cfi_endproc
.LFE0:
    .size    sub, .-sub
    .globl    main
    .type    main, @function
main:
.LFB1:
    .cfi_startproc
    pushq    %rbp
    .cfi_def_cfa_offset 16
    .cfi_offset 6, -16
    movq    %rsp, %rbp
    .cfi_def_cfa_register 6
    subq    $16, %rsp
    movl    $1, %esi
    movl    $2, %edi
    call    sub
    movl    %eax, -4(%rbp)
    movl    $0, %eax
    leave
    .cfi_def_cfa 7, 8
    ret
    .cfi_endproc
.LFE1:
    .size    main, .-main
    .ident    &quot;GCC: (GNU) 8.3.1 20191121 (Red Hat 8.3.1-5)&quot;
    .section    .note.GNU-stack,&quot;&quot;,@progbits
</code></pre><p>&#x51FD;&#x6570;&#x8C03;&#x7528;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x53C2;&#x6570;&#x7684;&#x4F20;&#x9012;&#x4EE5;&#x53CA;&#x8FD4;&#x56DE;&#x503C;&#x662F;&#x901A;&#x8FC7;&#x5BC4;&#x5B58;&#x5668;&#x4F20;&#x9012;&#x7684;&#xFF0C;&#x6BD4;&#x5982;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x662F;%edi&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x662F;%esi&#xFF0C;&#x8FD4;&#x56DE;&#x503C;&#x662F;%eax&#x3002;</p>
<h4 id="go&#x8BED;&#x8A00;"><a name="go&#x8BED;&#x8A00;" class="anchor-navigation-ex-anchor" href="#go&#x8BED;&#x8A00;"><i class="fa fa-link" aria-hidden="true"></i></a>go&#x8BED;&#x8A00;</h4>
<pre><code class="lang-go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">func</span> sub(first, second <span class="hljs-keyword">int</span>) (<span class="hljs-keyword">int</span>){
    <span class="hljs-keyword">return</span> first-second
}

<span class="hljs-keyword">func</span> main() {
    sub(<span class="hljs-number">2</span>,<span class="hljs-number">1</span>)
}
</code></pre>
<ul>
<li><code>go tool compile -S -N -l main.go</code></li>
</ul>
<pre><code>&quot;&quot;.sub STEXT nosplit size=25 args=0x18 locals=0x0
    0x0000 00000 (main.go:3)    TEXT    &quot;&quot;.sub(SB), NOSPLIT|ABIInternal, $0-24
    0x0000 00000 (main.go:3)    FUNCDATA    $0, gclocals&#xB7;33cdeccccebe80329f1fdbee7f5874cb(SB)
    0x0000 00000 (main.go:3)    FUNCDATA    $1, gclocals&#xB7;33cdeccccebe80329f1fdbee7f5874cb(SB)
    0x0000 00000 (main.go:3)    FUNCDATA    $2, gclocals&#xB7;33cdeccccebe80329f1fdbee7f5874cb(SB)
    0x0000 00000 (main.go:3)    PCDATA    $0, $0
    0x0000 00000 (main.go:3)    PCDATA    $1, $0
    0x0000 00000 (main.go:3)    MOVQ    $0, &quot;&quot;.~r2+24(SP)
    0x0009 00009 (main.go:4)    MOVQ    &quot;&quot;.first+8(SP), AX
    0x000e 00014 (main.go:4)    SUBQ    &quot;&quot;.second+16(SP), AX
    0x0013 00019 (main.go:4)    MOVQ    AX, &quot;&quot;.~r2+24(SP)
    0x0018 00024 (main.go:4)    RET
...    
&quot;&quot;.main STEXT size=68 args=0x0 locals=0x20
    0x0000 00000 (main.go:7)    TEXT    &quot;&quot;.main(SB), ABIInternal, $32-0
    0x0000 00000 (main.go:7)    MOVQ    (TLS), CX
    0x0009 00009 (main.go:7)    CMPQ    SP, 16(CX)
    0x000d 00013 (main.go:7)    JLS    61
    0x000f 00015 (main.go:7)    SUBQ    $32, SP
    0x0013 00019 (main.go:7)    MOVQ    BP, 24(SP)
    0x0018 00024 (main.go:7)    LEAQ    24(SP), BP
    0x001d 00029 (main.go:7)    FUNCDATA    $0, gclocals&#xB7;33cdeccccebe80329f1fdbee7f5874cb(SB)
    0x001d 00029 (main.go:7)    FUNCDATA    $1, gclocals&#xB7;33cdeccccebe80329f1fdbee7f5874cb(SB)
    0x001d 00029 (main.go:7)    FUNCDATA    $2, gclocals&#xB7;33cdeccccebe80329f1fdbee7f5874cb(SB)
    0x001d 00029 (main.go:8)    PCDATA    $0, $0
    0x001d 00029 (main.go:8)    PCDATA    $1, $0
    0x001d 00029 (main.go:8)    MOVQ    $2, (SP)
    0x0025 00037 (main.go:8)    MOVQ    $1, 8(SP)
    0x002e 00046 (main.go:8)    CALL    &quot;&quot;.sub(SB)
    0x0033 00051 (main.go:9)    MOVQ    24(SP), BP
    0x0038 00056 (main.go:9)    ADDQ    $32, SP
    0x003c 00060 (main.go:9)    RET
    0x003d 00061 (main.go:9)    NOP
    0x003d 00061 (main.go:7)    PCDATA    $1, $-1
    0x003d 00061 (main.go:7)    PCDATA    $0, $-1
    0x003d 00061 (main.go:7)    CALL    runtime.morestack_noctxt(SB)
    0x0042 00066 (main.go:7)    JMP    0
...
</code></pre><h3 id="go&#x7684;&#x51FD;&#x6570;&#x8C03;&#x7528;&#x5806;&#x6808;"><a name="go&#x7684;&#x51FD;&#x6570;&#x8C03;&#x7528;&#x5806;&#x6808;" class="anchor-navigation-ex-anchor" href="#go&#x7684;&#x51FD;&#x6570;&#x8C03;&#x7528;&#x5806;&#x6808;"><i class="fa fa-link" aria-hidden="true"></i></a>1.3.2. go&#x7684;&#x51FD;&#x6570;&#x8C03;&#x7528;&#x5806;&#x6808;</h3>
<ul>
<li>&#x603B;&#x7684;&#x6765;&#x8BF4;&#xFF0C;<ul>
<li>FP&#x5C31;&#x662F;&#x6307;&#x5411;&#x7684;&#x51FD;&#x6570;&#x53C2;&#x6570;&#x548C;&#x8FD4;&#x56DE;&#x503C;&#x7684;&#x5730;&#x65B9;&#xFF0C;&#x5982;&#x679C;&#x8981;&#x6307;&#x4EE3;&#x5177;&#x4F53;&#x7684;&#x67D0;&#x4E2A;&#x503C;&#xFF0C;<code>xx+&#x6B63;&#x6570;(FP)</code></li>
<li>&#x4F2A;SP,&#x5C31;&#x662F;&#x4E3A;&#x4E86;&#x65B9;&#x4FBF;&#x6307;&#x5411;callee&apos;s locall variable,<code>xx+&#x8D1F;&#x6570;(SP)</code><ul>
<li>&#x5982;&#x679C;&#x67D0;&#x4E2A;&#x51FD;&#x6570;&#x5185;&#x90E8;&#x6CA1;&#x6709;&#x5B9A;&#x4E49;&#x5C40;&#x90E8;&#x53D8;&#x91CF;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x4E2A;&#x503C;&#x5176;&#x5B9E;&#x5C31;&#x6CA1;&#x7528;&#xFF0C;&#x8DDF;&#x771F;&#x5B9E;SP&#x6307;&#x5411;&#x7684;&#x5185;&#x5BB9;&#x4E00;&#x81F4;&#x3002;</li>
</ul>
</li>
</ul>
</li>
</ul>
<pre><code class="lang-go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">func</span> main(){
    forTestFunctionNotExistLocalVariable(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)
    forTestFunctionAttachingLocalVariable(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)
}

<span class="hljs-keyword">func</span> forTestFunctionNotExistLocalVariable(v1, v2 <span class="hljs-keyword">int</span>) (r1, r2 <span class="hljs-keyword">int</span>) {
    r1, r2 = v1, v2
    <span class="hljs-keyword">return</span>
}

<span class="hljs-keyword">func</span> forTestFunctionAttachingLocalVariable(v1, v2 <span class="hljs-keyword">int</span>) [<span class="hljs-number">2</span>]<span class="hljs-keyword">int</span>{
    <span class="hljs-keyword">var</span> d [<span class="hljs-number">2</span>]<span class="hljs-keyword">int</span> <span class="hljs-comment">//arrary</span>
    d[<span class="hljs-number">0</span>], d[<span class="hljs-number">1</span>] = v1, v2
    <span class="hljs-keyword">return</span> d
}
</code></pre>
<ul>
<li><code>go tool compile -S -N -l main.go</code></li>
</ul>
<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x4E0B;&#x9762;&#x4F7F;&#x7528;&#x6C47;&#x7F16;&#x5DE5;&#x5177;&#x5448;&#x73B0;&#x51FA;&#x6765;&#x7684;&#x90FD;&#x662F;&#x4F7F;&#x7528;&#x7684;<code>SP</code>&#x8FD9;&#x4E2A;&#x5BC4;&#x5B58;&#x5668;&#xFF0C;&#x6CA1;&#x6709;&#x4F7F;&#x7528;FP&#x3002;</p>
<pre><code>&quot;&quot;.main STEXT size=90 args=0x0 locals=0x28
    0x0000 00000 (main.go:3)    TEXT    &quot;&quot;.main(SB), ABIInternal, $40-0
    0x0000 00000 (main.go:3)    MOVQ    (TLS), CX
    0x0009 00009 (main.go:3)    CMPQ    SP, 16(CX)
    0x000d 00013 (main.go:3)    JLS    83
    0x000f 00015 (main.go:3)    SUBQ    $40, SP
    0x0013 00019 (main.go:3)    MOVQ    BP, 32(SP)
    0x0018 00024 (main.go:3)    LEAQ    32(SP), BP
    0x001d 00029 (main.go:4)    PCDATA    $0, $0
    0x001d 00029 (main.go:4)    PCDATA    $1, $0
    0x001d 00029 (main.go:4)    MOVQ    $1, (SP)
    0x0025 00037 (main.go:4)    MOVQ    $2, 8(SP)
    0x002e 00046 (main.go:4)    CALL    &quot;&quot;.forTestFunctionNotExistLocalVariable(SB)
    0x0033 00051 (main.go:5)    MOVQ    $1, (SP)
    0x003b 00059 (main.go:5)    MOVQ    $2, 8(SP)
    0x0044 00068 (main.go:5)    CALL    &quot;&quot;.forTestFunctionAttachingLocalVariable(SB)
    0x0049 00073 (main.go:6)    MOVQ    32(SP), BP
    0x004e 00078 (main.go:6)    ADDQ    $40, SP
    0x0052 00082 (main.go:6)    RET
    0x0053 00083 (main.go:6)    NOP
    0x0053 00083 (main.go:3)    PCDATA    $1, $-1
    0x0053 00083 (main.go:3)    PCDATA    $0, $-1
    0x0053 00083 (main.go:3)    CALL    runtime.morestack_noctxt(SB)
    0x0058 00088 (main.go:3)    JMP    0


&quot;&quot;.forTestFunctionNotExistLocalVariable STEXT nosplit size=39 args=0x20 locals=0x0
    0x0000 00000 (main.go:8)    TEXT    &quot;&quot;.forTestFunctionNotExistLocalVariable(SB), NOSPLIT|ABIInternal, $0-32
    //...
    0x0000 00000 (main.go:8)    MOVQ    $0, &quot;&quot;.r1+24(SP)
    0x0009 00009 (main.go:8)    MOVQ    $0, &quot;&quot;.r2+32(SP)
    0x0012 00018 (main.go:9)    MOVQ    &quot;&quot;.v1+8(SP), AX
    0x0017 00023 (main.go:9)    MOVQ    AX, &quot;&quot;.r1+24(SP)
    0x001c 00028 (main.go:9)    MOVQ    &quot;&quot;.v2+16(SP), AX
    0x0021 00033 (main.go:9)    MOVQ    AX, &quot;&quot;.r2+32(SP)
    0x0026 00038 (main.go:10)    RET


&quot;&quot;.forTestFunctionAttachingLocalVariable STEXT nosplit size=68 args=0x20 locals=0x18
    0x0000 00000 (main.go:13)    TEXT    &quot;&quot;.forTestFunctionAttachingLocalVariable(SB), NOSPLIT|ABIInternal, $24-32
    0x0000 00000 (main.go:13)    SUBQ    $24, SP
    0x0004 00004 (main.go:13)    MOVQ    BP, 16(SP)
    0x0009 00009 (main.go:13)    LEAQ    16(SP), BP
    //...
    0x0011 00017 (main.go:13)    MOVUPS    X0, &quot;&quot;.~r2+48(SP)
    0x0016 00022 (main.go:14)    XORPS    X0, X0
    0x0019 00025 (main.go:14)    MOVUPS    X0, &quot;&quot;.d(SP)
    0x001d 00029 (main.go:15)    MOVQ    &quot;&quot;.v1+32(SP), AX
    0x0022 00034 (main.go:15)    MOVQ    AX, &quot;&quot;.d(SP)
    0x0026 00038 (main.go:15)    MOVQ    &quot;&quot;.v2+40(SP), CX
    0x002b 00043 (main.go:15)    MOVQ    CX, &quot;&quot;.d+8(SP)
    0x0030 00048 (main.go:16)    MOVQ    AX, &quot;&quot;.~r2+48(SP)
    0x0035 00053 (main.go:16)    MOVQ    CX, &quot;&quot;.~r2+56(SP)
    0x003a 00058 (main.go:16)    MOVQ    16(SP), BP
    0x003f 00063 (main.go:16)    ADDQ    $24, SP
    0x0043 00067 (main.go:16)    RET
</code></pre><p>&#x6211;&#x4EEC;&#x81EA;&#x5DF1;&#x5199;&#x4E00;&#x4E2A;&#x6C47;&#x7F16;&#x3002;</p>
<ul>
<li>main.go&#x6587;&#x4EF6;</li>
</ul>
<pre><code class="lang-go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">func</span> forTestFunctionNotExistLocalVariable(v1, v2 <span class="hljs-keyword">int</span>) (r1, r2 <span class="hljs-keyword">int</span>)
<span class="hljs-keyword">func</span> forTestFunctionAttachingLocalVariable(v1, v2 <span class="hljs-keyword">int</span>) [<span class="hljs-number">2</span>]<span class="hljs-keyword">int</span>

<span class="hljs-keyword">func</span> main(){
    forTestFunctionNotExistLocalVariable(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)
    forTestFunctionAttachingLocalVariable(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)
}

<span class="hljs-comment">// func forTestFunctionNotExistLocalVariable(v1, v2 int) (r1, r2 int) {</span>
<span class="hljs-comment">//     r1, r2 = v1, v2</span>
<span class="hljs-comment">//     return</span>
<span class="hljs-comment">// }</span>

<span class="hljs-comment">// func forTestFunctionAttachingLocalVariable(v1, v2 int) [2]int{</span>
<span class="hljs-comment">//     var d [2]int //arrary</span>
<span class="hljs-comment">//     d[0], d[1] = v1, v2</span>
<span class="hljs-comment">//     return d</span>
<span class="hljs-comment">// }</span>
</code></pre>
<ul>
<li>forTestFunction.s&#x6587;&#x4EF6;</li>
</ul>
<pre><code class="lang-go">#include <span class="hljs-string">&quot;textflag.h&quot;</span>

TEXT &#xB7;forTestFunctionNotExistLocalVariable(SB),NOSPLIT,$<span class="hljs-number">0</span><span class="hljs-number">-32</span>
   MOVQ v1+<span class="hljs-number">0</span>(FP), AX          <span class="hljs-comment">// FP+0  &#x4E3A;&#x53C2;&#x6570;v1&#xFF0C;&#x5C06;&#x5176;&#x503C;&#x62F7;&#x8D1D;&#x5230;&#x5BC4;&#x5B58;&#x5668;AX&#x4E2D;</span>
   MOVQ AX, r1+<span class="hljs-number">24</span>(FP)         <span class="hljs-comment">// FP+24 &#x4E3A;&#x8FD4;&#x56DE;&#x503C;r1&#xFF0C;&#x5C06;&#x5BC4;&#x5B58;&#x5668;AX&#x8D4B;&#x503C;&#x7ED9;&#x8FD4;&#x56DE;&#x503C;r1</span>
   MOVQ v2+<span class="hljs-number">8</span>(FP), AX          <span class="hljs-comment">// FP+8  &#x4E3A;&#x53C2;&#x6570;v2</span>
   MOVQ AX, f+<span class="hljs-number">32</span>(FP)          <span class="hljs-comment">// FP+24 &#x4E3A;&#x8FD4;&#x56DE;&#x503C;r2</span>
   RET                        <span class="hljs-comment">// return</span>

TEXT &#xB7;forTestFunctionAttachingLocalVariable(SB),NOSPLIT,$<span class="hljs-number">16</span><span class="hljs-number">-32</span>    <span class="hljs-comment">// $16&#x503C;&#x6808;&#x7A7A;&#x95F4;16byte(&#x7F16;&#x8BD1;&#x5668;&#x4F1A;&#x81EA;&#x52A8;&#xFF0C;&#x6808;&#x7A7A;&#x95F4;&#x4F1A;&#x88AB;+8&#x7528;&#x4E8E;&#x5B58;&#x50A8;caller&apos;s BP&#x5BC4;&#x5B58;&#x5668;,&#x6240;&#x4EE5;&#x6700;&#x7EC8;&#x662F;24byte)&#xFF0C;- &#x540E;&#x9762;&#x7684;32&#x662F;caller&#x7684;&#x53C2;&#x6570;&#x4E0E;&#x8FD4;&#x56DE;&#x503C;&#x5927;&#x5C0F;</span>
                                <span class="hljs-comment">// </span>
   MOVQ    $<span class="hljs-number">0</span>, d<span class="hljs-number">-16</span>(SP)         <span class="hljs-comment">// &#x521D;&#x59CB;&#x5316;d[0]</span>
   MOVQ    $<span class="hljs-number">0</span>, d<span class="hljs-number">-8</span>(SP)          <span class="hljs-comment">// &#x521D;&#x59CB;&#x5316;d[1]</span>

   MOVQ    v1+<span class="hljs-number">0</span>(FP), AX          <span class="hljs-comment">// d[0] = v1</span>
   MOVQ    AX, d<span class="hljs-number">-16</span>(SP)         <span class="hljs-comment">//</span>
   MOVQ    v2+<span class="hljs-number">8</span>(FP), AX          <span class="hljs-comment">// d[1] = v2</span>
   MOVQ    AX, d<span class="hljs-number">-8</span>(SP)          <span class="hljs-comment">//</span>

   MOVQ    d<span class="hljs-number">-16</span>(SP), AX         <span class="hljs-comment">// return[0] = d[0]</span>
   MOVQ    AX, r+<span class="hljs-number">16</span>(FP)         <span class="hljs-comment">//</span>
   MOVQ    d<span class="hljs-number">-8</span>(SP), AX          <span class="hljs-comment">// return[1] = d[1]</span>
   MOVQ    AX, r+<span class="hljs-number">24</span>(FP)         <span class="hljs-comment">//</span>

   RET                          <span class="hljs-comment">// return</span>
</code></pre>
<ul>
<li>&#x88AB;&#x8C03;&#x7528;&#x7684;&#x51FD;&#x6570;&#x65E0;&#x5C40;&#x90E8;&#x53D8;&#x91CF;</li>
</ul>
<pre><code>------
r2 (8 bytes)
r1 (8 bytes)
------
v2 (8 bytes)
v1 (8 bytes)
------ --------------&gt; [pseudo FP]
ret addr (8 bytes)
------ --------------&gt; [pseudo SP][hardware SP]
</code></pre><ul>
<li>&#x88AB;&#x8C03;&#x7528;&#x7684;&#x51FD;&#x6570;&#x6709;&#x5C40;&#x90E8;&#x53D8;&#x91CF;</li>
</ul>
<pre><code>------
d[1] (8 bytes)
d[0] (8 bytes)
------
v2 (8 bytes)
v1 (8 bytes)
------ --------------&gt; [pseudo FP]
ret addr (8 bytes)
------
caller BP (8 bytes)--&gt; [&#x7F16;&#x8BD1;&#x5668;&#x81EA;&#x52A8;&#x63D2;&#x5165;]
------ --------------&gt; [pseudo SP]
d[1] (8 bytes)
d[0] (8 bytes)
------ --------------&gt; [hardware SP]
</code></pre><p>&#x5217;&#x51FA;&#x53CD;&#x7F16;&#x8BD1;<code>go tool objdump &lt;binary&gt;</code>&#x7684;&#x5BF9;&#x6BD4;&#xFF0C;&#x5C55;&#x793A;&#x4E86;&#x7F16;&#x8BD1;&#x5668;&#x4F1A;&#x81EA;&#x52A8;&#x5E2E;&#x6211;&#x4EEC;&#x52A0;&#x4E0A;<code>caller&apos;s BP</code>&#x5230;<code>callee&apos;s&#x6808;&#x4E2D;</code>&#x3002;</p>
<ul>
<li><code>go tool objdump &lt;binary&gt;</code></li>
</ul>
<pre><code class="lang-sh">TEXT main.forTestFunctionNotExistLocalVariable(SB) /root/code/go_lanage/<span class="hljs-built_in">test</span>Assemble/asm.s
  asm.s:4        0x452600        488b442408        MOVQ 0x8(SP), AX
  asm.s:5        0x452605        4889442420        MOVQ AX, 0x20(SP)
  asm.s:6        0x45260a        488b442410        MOVQ 0x10(SP), AX
  asm.s:7        0x45260f        4889442428        MOVQ AX, 0x28(SP)
  asm.s:8        0x452614        c3            RET
TEXT main.forTestFunctionAttachingLocalVariable(SB) /root/code/go_lanage/<span class="hljs-built_in">test</span>Assemble/asm.s
  asm.s:10        0x452620        4883ec18        SUBQ <span class="hljs-variable">$0x18</span>, SP
  asm.s:10        0x452624        48896c2410        MOVQ BP, 0x10(SP)
  asm.s:10        0x452629        488d6c2410        LEAQ 0x10(SP), BP
  asm.s:12        0x45262e        48c7042400000000    MOVQ <span class="hljs-variable">$0x0</span>, 0(SP)
  asm.s:13        0x452636        48c744240800000000    MOVQ <span class="hljs-variable">$0x0</span>, 0x8(SP)
  asm.s:15        0x45263f        488b442420        MOVQ 0x20(SP), AX
  asm.s:16        0x452644        48890424        MOVQ AX, 0(SP)
  asm.s:17        0x452648        488b442428        MOVQ 0x28(SP), AX
  asm.s:18        0x45264d        4889442408        MOVQ AX, 0x8(SP)
  asm.s:20        0x452652        488b0424        MOVQ 0(SP), AX
  asm.s:21        0x452656        4889442430        MOVQ AX, 0x30(SP)
  asm.s:22        0x45265b        488b442408        MOVQ 0x8(SP), AX
  asm.s:23        0x452660        4889442438        MOVQ AX, 0x38(SP)
  asm.s:25        0x452665        488b6c2410        MOVQ 0x10(SP), BP
  asm.s:25        0x45266a        4883c418        ADDQ <span class="hljs-variable">$0x18</span>, SP
  asm.s:25        0x45266e        c3            RET
</code></pre>
<h3 id="&#x4F8B;&#x5B50;"><a name="&#x4F8B;&#x5B50;" class="anchor-navigation-ex-anchor" href="#&#x4F8B;&#x5B50;"><i class="fa fa-link" aria-hidden="true"></i></a>1.3.3. &#x4F8B;&#x5B50;</h3>
<ul>
<li>&#x4E0B;&#x9762;&#x6765;&#x505A;&#x4E0B;&#x5B9E;&#x9A8C;&#x3002;<ul>
<li>&#x786E;&#x8BA4;FP&#xFF0C; SP&#x76F8;&#x5BF9;&#x4E8E;real register&#x7684;&#x4F4D;&#x7F6E;&#x70B9;&#x5728;&#x90A3;&#x91CC;&#x3002;</li>
<li>&#x6211;&#x4EEC; presudo FP&#x5E94;&#x8BE5;&#x5728;caller&apos;s next pc + 8byte</li>
<li>presudo SP&#x5E94;&#x8BE5;&#x5728;caller&apos;s BP</li>
</ul>
</li>
</ul>
<blockquote>
<p>main.go</p>
</blockquote>
<pre><code class="lang-go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">func</span> test_FP_SP(a, b <span class="hljs-keyword">int64</span>)(first <span class="hljs-keyword">uintptr</span>, second <span class="hljs-keyword">uintptr</span>)

<span class="hljs-keyword">func</span> main(){
    first, second := test_FP_SP(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)
    first -= second
    _ = first
}
</code></pre>
<blockquote>
<p>test_FP_SP.s</p>
</blockquote>
<pre><code class="lang-go"><span class="hljs-comment">// func test_FP_SP(a, b int64)(first uintptr, second uintptr)</span>
TEXT &#xB7;test_FP_SP(SB),$<span class="hljs-number">4112</span><span class="hljs-number">-16</span>
        LEAQ x<span class="hljs-number">-0</span>(SP), DI         <span class="hljs-comment">// </span>
        MOVQ DI, first+<span class="hljs-number">16</span>(FP)    <span class="hljs-comment">// &#x5C06;&#x539F;&#x4F2A;&#x5BC4;&#x5B58;&#x5668;SP&#x504F;&#x79FB;&#x91CF;&#x5B58;&#x5165;&#x8FD4;&#x56DE;&#x503C;first</span>

        MOVQ    SP, BP           <span class="hljs-comment">// &#x5B58;&#x50A8;&#x7269;&#x7406;SP&#x504F;&#x79FB;&#x91CF;&#x5230;BP&#x5BC4;&#x5B58;&#x5668;</span>
        ADDQ    $<span class="hljs-number">4096</span>, SP        <span class="hljs-comment">// &#x5C06;&#x7269;&#x7406;SP&#x504F;&#x79FB;&#x589E;&#x52A0;4K</span>

        LEAQ x<span class="hljs-number">-0</span>(SP), SI         <span class="hljs-comment">// &#x5728;&#x4E0A;&#x9762;&#x4E2D;&#x53EA;&#x6539;&#x53D8;&#x4E86;&#x4E00;&#x4E2A;&#x503C;&#x5C31;&#x662F;SP&#x8FD9;&#x4E2A;&#x5BC4;&#x5B58;&#x5668;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x6B21;&#x4E00;&#x6A21;&#x4E00;&#x6837;&#x7684;&#x628A;x-0(SP)&#x7ED9;&#x5230;&#x4E86;SI.</span>

        <span class="hljs-comment">/* &#x7B2C;&#x4E00;&#x4E2A; MOVQ    BP, SP */</span>
        MOVQ    BP, SP           <span class="hljs-comment">// &#x6062;&#x590D;&#x7269;&#x7406;SP&#xFF0C;&#x56E0;&#x4E3A;&#x4FEE;&#x6539;&#x7269;&#x7406;SP&#x540E;&#xFF0C;&#x4F2A;&#x5BC4;&#x5B58;&#x5668;FP/SP&#x968F;&#x4E4B;&#x6539;&#x53D8;&#xFF0C;</span>
                                 <span class="hljs-comment">// &#x4E3A;&#x4E86;&#x6B63;&#x786E;&#x8BBF;&#x95EE;FP&#xFF0C;&#x5148;&#x6062;&#x590D;&#x7269;&#x7406;SP</span>
        MOVQ SI, second+<span class="hljs-number">24</span>(FP)   <span class="hljs-comment">// &#x5C06;&#x504F;&#x79FB;&#x540E;&#x7684;&#x4F2A;&#x5BC4;&#x5B58;&#x5668;SP&#x504F;&#x79FB;&#x91CF;&#x5B58;&#x5165;&#x8FD4;&#x56DE;&#x503C;second</span>

        <span class="hljs-comment">/* &#x7B2C;&#x4E8C;&#x4E2A; MOVQ    BP, SP */</span>
        <span class="hljs-comment">//MOVQ    BP, SP         </span>

        RET                        <span class="hljs-comment">// &#x4ECE;&#x8F93;&#x51FA;&#x7684;second-first&#x6765;&#x770B;&#xFF0C;&#x6B63;&#x597D;&#x76F8;&#x5DEE;4K</span>
</code></pre>
<p>&#x7F16;&#x8BD1;&#x4E00;&#x4E0B;&#x6E90;&#x4EE3;&#x7801;&#xFF1A;<code>go build -gcflags &quot;-N -l&quot; -o test .</code> OR <code>go build -gcflags &quot;all=-N -l&quot; -o test .</code> OR <code>GOOS=linux GOARCH=amd64 go tool compile -S .</code></p>
<pre><code class="lang-sh">[root@iZf8z14idfp0rwhiicngwqZ FP_SP]<span class="hljs-comment"># tree .</span>
.
&#x251C;&#x2500;&#x2500; main.go
&#x251C;&#x2500;&#x2500; main.o
&#x251C;&#x2500;&#x2500; <span class="hljs-built_in">test</span>
&#x2514;&#x2500;&#x2500; <span class="hljs-built_in">test</span>_FP_SP.s
</code></pre>
<p>&#x6211;&#x4EEC;&#x7528;&#x5230;&#x7684;gdb&#x547D;&#x4EE4;:</p>
<pre><code class="lang-sh">
gdb ./<span class="hljs-built_in">test</span>
list
b 6
display /25i <span class="hljs-variable">$pc</span>-8
si
si
si
</code></pre>
<p><img src="https://raw.githubusercontent.com/zput/myPicLib/master/zput.github.io/20210129195940.png" alt="20210129195940">
&#x4ECE;&#x4E0A;&#x9762;&#x7684;&#x56FE;&#x4E2D;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#xFF0C;go assemble&#x4E2D;&#x7684;<code>x-0(SP)</code>&#x4E0E;<code>first+16(FP)</code>,&#x5176;&#x5B9E;&#x90FD;&#x662F;&#x4E0E;SP&#x5BC4;&#x5B58;&#x5668;&#x5173;&#x8054;&#x7684;&#xFF0C;
&#x5176;&#x4E2D;SP&#xFF0C;&#x4F2A;FP&#xFF0C;&#x4E0E;&#x4F2A;SP&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x5728;&#x4E0B;&#x56FE;&#x4E2D;&#x5DF2;&#x7ECF;&#x6807;&#x8BC6;&#x51FA;&#x6765;&#x4E86;;</p>
<pre><code class="lang-sh">+------------------------+                                  
|                        |                                  
|                        |                                  
|         second         |                                  
|                        |                                  
|-------------------------                                  
|                        |                                  
|                        |                                  
|         first          |                                  
|                        |                                  
|------------------------|                                  
|                        |                                  
|                        |                                  
|         b              |                                  
|                        |                                  
|------------------------|                                  
|                        |                                  
|                        |                                  
|         a              |                                  
|                        |                                  
+------------------------+ &lt;-------- &#x4F2A;FP!!!                      
|                        |                                  
|                        |                                  
|     <span class="hljs-built_in">caller</span><span class="hljs-string">&apos;s pc        |                                  
|                        |                                  
+------------------------+                                  
|                        |                                  
|                        |                                  
|     caller&apos;</span>s BP        |                                  
|                        |                                  
|------------------------| &lt;-------- callee<span class="hljs-string">&apos;s BP &lt;===&gt; &#x4F2A;SP!!!
|                        |                                  
|                        |                                  
|        ...             |                                  
|                        |                                  
|                        |                                  
+------------------------+ &lt;-------- &#x771F;&#x5B9E;&#x5BC4;&#x5B58;&#x5668;SP[&#x5B83;&#x7B49;&#x4E8E;caller&apos;</span>s SP - <span class="hljs-built_in">caller</span><span class="hljs-string">&apos;s next CP(8) - callee&apos;</span>s stack size;&#x4E0A;&#x56FE;&#x5DF2;&#x7ECF;&#x6807;&#x8BC6;&#x4E86;]
</code></pre>
<p><img src="https://raw.githubusercontent.com/zput/myPicLib/master/zput.github.io/20210129211423.png" alt="MOVQ    0(SP), AX // f&apos;s PC"></p>
<h3 id="&#x6269;&#x5C55;"><a name="&#x6269;&#x5C55;" class="anchor-navigation-ex-anchor" href="#&#x6269;&#x5C55;"><i class="fa fa-link" aria-hidden="true"></i></a>1.3.4. &#x6269;&#x5C55;</h3>
<p>&#x5F53;&#x6211;&#x4EEC;&#x628A;<code>/* &#x7B2C;&#x4E00;&#x4E2A; MOVQ    BP, SP */</code>&#x4E0B;&#x9762;&#x7684;&#x6CE8;&#x91CA;&#x6389;&#xFF0C;&#x6267;&#x884C;&#x7684;&#x8BDD;&#x4F1A;panic&#xFF0C;&#x662F;&#x56E0;&#x4E3A;PC&#x5BC4;&#x5B58;&#x5668;&#x8BFB;&#x53D6;&#x9519;&#x8BEF;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x6CE8;&#x91CA;&#x6389;&#x7684;&#x4E0B;&#x4E00;&#x884C;&#x5BFC;&#x81F4;&#x7684;&#x3002;</p>
<p>&#x53EF;&#x4EE5;&#x5B9E;&#x9A8C;&#x4E0B;:&#x6211;&#x4EEC;&#x628A;<code>/* &#x7B2C;&#x4E8C;&#x4E2A; MOVQ    BP, SP */</code>&#x53D6;&#x6D88;&#x6CE8;&#x91CA;&#xFF0C;&#x5B83;&#x5C31;&#x6B63;&#x5E38;&#x6267;&#x884C;&#xFF0C;&#x53EA;&#x662F;&#x8FD4;&#x56DE;&#x503C;&#x4E0D;&#x5BF9;&#x800C;&#x5DF2;&#x3002;</p>
<h2 id="&#x4ECE;&#x51FD;&#x6570;&#x4E2D;&#x6269;&#x5C55;&#x51FA;&#x6765;&#x7684;&#x5468;&#x8FB9;&#x77E5;&#x8BC6;"><a name="&#x4ECE;&#x51FD;&#x6570;&#x4E2D;&#x6269;&#x5C55;&#x51FA;&#x6765;&#x7684;&#x5468;&#x8FB9;&#x77E5;&#x8BC6;" class="anchor-navigation-ex-anchor" href="#&#x4ECE;&#x51FD;&#x6570;&#x4E2D;&#x6269;&#x5C55;&#x51FA;&#x6765;&#x7684;&#x5468;&#x8FB9;&#x77E5;&#x8BC6;"><i class="fa fa-link" aria-hidden="true"></i></a>1.4. &#x4ECE;&#x51FD;&#x6570;&#x4E2D;&#x6269;&#x5C55;&#x51FA;&#x6765;&#x7684;&#x5468;&#x8FB9;&#x77E5;&#x8BC6;</h2>
<h3 id="&#x51FD;&#x6570;&#x7684;&#x5B9A;&#x4E49;"><a name="&#x51FD;&#x6570;&#x7684;&#x5B9A;&#x4E49;" class="anchor-navigation-ex-anchor" href="#&#x51FD;&#x6570;&#x7684;&#x5B9A;&#x4E49;"><i class="fa fa-link" aria-hidden="true"></i></a>1.4.1. &#x51FD;&#x6570;&#x7684;&#x5B9A;&#x4E49;</h3>
<p><img src="https://raw.githubusercontent.com/zput/myPicLib/master/zput.github.io/20210323105508.png" alt="20210323105508"></p>
<ul>
<li>&#x51FD;&#x6570;&#x7684;&#x58F0;&#x660E;&#x4EE5;TEXT&#x6807;&#x8BC6;&#x5F00;&#x5934;&#xFF0C;</li>
<li>&#x4EE5;<code>${package}&#xB7;${function}</code>&#x4E3A;&#x51FD;&#x6570;&#x540D;&#x3002;<ul>
<li>&#x5F53;&#x51FD;&#x6570;&#x5C5E;&#x4E8E;&#x672C;package&#x65F6;&#xFF0C;&#x901A;&#x5E38;&#x53EF;&#x4EE5;&#x4E0D;&#x5199;${package}&#xFF0C;&#x53EA;&#x7559;&#xB7;${function}&#x5373;&#x53EF;&#x3002;</li>
<li>&#xB7;&#x5728;mac&#x4E0A;&#x53EF;&#x4EE5;&#x7528;shift+option+9 &#x6253;&#x51FA;&#x3002;</li>
</ul>
</li>
<li>$0&#x8868;&#x793A;&#x8BE5;&#x51FD;&#x6570;&#x6808;&#x5927;&#x5C0F;&#x4E3A;0byte&#xFF0C;&#x8BA1;&#x7B97;&#x6808;&#x5927;&#x5C0F;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x8003;&#x8651;&#x5C40;&#x90E8;&#x53D8;&#x91CF;&#x548C;&#x672C;&#x51FD;&#x6570;&#x5185;&#x8C03;&#x7528;&#x5176;&#x4ED6;&#x51FD;&#x6570;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x4F20;&#x53C2;&#x7684;&#x7A7A;&#x95F4;&#xFF0C;&#x4E0D;&#x542B;&#x51FD;&#x6570;&#x8FD4;&#x56DE;&#x5730;&#x5740;&#x548C;CALLER BP&#xFF08;&#x8FD9;2&#x4E2A;&#x540E;&#x9762;&#x4F1A;&#x8BB2;&#x5230;&#xFF09;&#x3002;</li>
<li>$16&#x8868;&#x793A;&#x8BE5;&#x51FD;&#x6570;&#x5165;&#x53C2;&#x548C;&#x8FD4;&#x56DE;&#x503C;&#x4E00;&#x5171;&#x6709;16byte&#x3002;&#x5F53;&#x6709;NOSPLIT&#x6807;&#x8BC6;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x4E0D;&#x5199;&#x8F93;&#x5165;&#x53C2;&#x6570;&#x3001;&#x8FD4;&#x56DE;&#x503C;&#x5360;&#x7528;&#x7684;&#x5927;&#x5C0F;&#x3002;</li>
</ul>
<p><img src="https://raw.githubusercontent.com/zput/myPicLib/master/zput.github.io/20210323110847.png" alt="20210323110847"></p>
<ul>
<li>NOSPLIT: don&#x2019;t insert a stack check<ul>
<li>Reduces function call overhead</li>
<li>Limits size of stack</li>
<li>Use on leaf functions (unless a large stack is needed)</li>
</ul>
</li>
<li>NOFRAME: don&#x2019;t allocate a stack frame<ul>
<li>Function must be a leaf</li>
<li>Function must be declared with a stack size of 0 (i.e. TEXT ...,NOFRAME,$0-...)</li>
<li>No frame pointer (or return address on link register architectures) saved</li>
</ul>
</li>
</ul>
<h3 id="&#x53D8;&#x91CF;&#x58F0;&#x660E;"><a name="&#x53D8;&#x91CF;&#x58F0;&#x660E;" class="anchor-navigation-ex-anchor" href="#&#x53D8;&#x91CF;&#x58F0;&#x660E;"><i class="fa fa-link" aria-hidden="true"></i></a>1.4.2. &#x53D8;&#x91CF;&#x58F0;&#x660E;</h3>
<p>go&#x91CC;&#x9762;&#x5DF2;&#x521D;&#x59CB;&#x5316;&#x8FC7;&#x7684;&#x5168;&#x5C40;&#x7684;const&#x3001;var&#x53D8;&#x91CF;, &#x5B83;&#x5728;&#x6C47;&#x7F16;&#x91CC;&#xFF0C;&#x4E00;&#x822C;&#x662F;&#x5B58;&#x50A8;&#x5728;<code>.rodata</code>&#x6216;&#x8005;<code>.data</code>&#x6BB5;&#x4E2D;.
&#x5728;&#x6C47;&#x7F16;&#x4E2D;&#x8868;&#x793A;&#x5982;&#x4E0B;&#xFF1A;</p>
<ul>
<li>DATA &#x7ED3;&#x5408; GLOBL &#x6765;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x53D8;&#x91CF;<ul>
<li>&#x5168;&#x5C40;&#x53D8;&#x91CF;&#x7684;<strong>&#x6570;&#x636E;&#x90E8;&#x5206;</strong>&#x91C7;&#x7528;<code>DATA symbol+offset(SB)/width, value</code>&#x683C;&#x5F0F;&#x8FDB;&#x884C;&#x58F0;&#x660E;&#x3002;<ul>
<li>&#x60F3;&#x5728;&#x5168;&#x5C40;&#x53D8;&#x91CF;&#x4E2D;&#x5B9A;&#x4E49;&#x6570;&#x7EC4;&#xFF0C;&#x6216;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x8FD9;&#x65F6;&#x5019;&#x5C31;&#x9700;&#x8981;&#x7528;&#x4E0A;<code>&#x975E;0&#x7684;offset</code></li>
<li>&#x5224;&#x65AD;&#x662F;&#x5426;&#x662F;&#x4E00;&#x4E2A;&#x79C1;&#x6709;&#x5168;&#x5C40;&#x53D8;&#x91CF;&#x7684;&#x58F0;&#x660E;&#xFF0C;&lt;&gt;&#x8868;&#x793A;&#x8BE5;&#x53D8;&#x91CF;&#x53EA;&#x5728;&#x8BE5;&#x6587;&#x4EF6;&#x5185;&#x5168;&#x5C40;&#x53EF;&#x89C1;&#x3002;</li>
</ul>
</li>
<li>GLOBL &#x6307;&#x4EE4;&#x5C06;&#x53D8;&#x91CF;&#x58F0;&#x660E;&#x4E3A; global&#xFF0C;&#x989D;&#x5916;&#x63A5;&#x6536;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x4E00;&#x4E2A;&#x662F; flag&#xFF0C;&#x53E6;&#x4E00;&#x4E2A;&#x662F;&#x53D8;&#x91CF;&#x7684;&#x603B;&#x5927;&#x5C0F;: <code>GLOBL divtab(SB), RODATA, $64</code></li>
</ul>
</li>
</ul>
<p>&#x4F8B;&#x5B50;:</p>
<pre><code class="lang-go"><span class="hljs-comment">// &#x5728;&#x5168;&#x5C40;&#x53D8;&#x91CF;&#x4E2D;&#x5B9A;&#x4E49;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x7528;&#x4E0A;&#x975E;0&#x7684;offset </span>
DATA bio&lt;&gt;+<span class="hljs-number">0</span>(SB)/<span class="hljs-number">8</span>, $<span class="hljs-string">&quot;oh yes i&quot;</span>
DATA bio&lt;&gt;+<span class="hljs-number">8</span>(SB)/<span class="hljs-number">8</span>, $<span class="hljs-string">&quot;am here &quot;</span>
GLOBL bio&lt;&gt;(SB), RODATA, $<span class="hljs-number">16</span>
</code></pre>
<ul>
<li>&#x7C7B;&#x4F3C;RODATA/NOPTR&#x7684;&#x7279;&#x6B8A;&#x58F0;&#x660E;&#x8FD8;&#x6709;&#xFF1A;<ul>
<li>NOPROF = 1 (For TEXT items.) Don&#x2019;t profile the marked function. This flag is deprecated.</li>
<li>DUPOK = 2 It is legal to have multiple instances of this symbol in a single binary. The linker will choose one of the duplicates to use.</li>
<li>NOSPLIT = 4 (For TEXT items.) Don&#x2019;t insert the preamble to check if the stack must be split. The frame for the routine, plus anything it calls, must fit in the spare space at the top of the stack segment. Used to protect routines such as the stack splitting code itself.</li>
<li>RODATA = 8 (For DATA and GLOBL items.) Put this data in a read-only section.</li>
<li>NOPTR = 16 (For DATA and GLOBL items.) This data contains no pointers and therefore does not need to be scanned by the garbage collector.</li>
<li>WRAPPER = 32 (For TEXT items.) This is a wrapper function and should not count as disabling recover.</li>
<li>NEEDCTXT = 64 (For TEXT items.) This function is a closure so it uses its incoming context register.</li>
</ul>
</li>
</ul>
<h3 id="&#x6307;&#x4EE4;&#x6C47;&#x603B;"><a name="&#x6307;&#x4EE4;&#x6C47;&#x603B;" class="anchor-navigation-ex-anchor" href="#&#x6307;&#x4EE4;&#x6C47;&#x603B;"><i class="fa fa-link" aria-hidden="true"></i></a>1.4.3. &#x6307;&#x4EE4;&#x6C47;&#x603B;</h3>
<p>&#x4F7F;&#x7528;&#x6C47;&#x7F16;&#xFF0C;&#x5BF9;&#x6BCF;&#x4E2A;&#x5E73;&#x53F0;&#xFF0C;&#x6709;&#x4E0D;&#x540C;&#x7684;&#x6307;&#x4EE4;&#xFF0C;&#x53EF;&#x4EE5;&#x53C2;&#x8003;<a href="https://lrita.github.io/images/posts/go/GoFunctionsInAssembly.pdf" target="_blank">GoFunctionsInAssembly</a>&#x5176;&#x4E2D;&#x6709;&#x5404;&#x4E2A;&#x5E73;&#x53F0;&#x6C47;&#x7F16;&#x6307;&#x4EE4;&#x901F;&#x89C8;&#x548C;&#x5BF9;&#x7167;&#x3002;</p>
<h3 id="&#x5B8F;"><a name="&#x5B8F;" class="anchor-navigation-ex-anchor" href="#&#x5B8F;"><i class="fa fa-link" aria-hidden="true"></i></a>1.4.4. &#x5B8F;</h3>
<p>&#x4E0E;C&#x8BED;&#x8A00;&#x7C7B;&#x4F3C;&#xFF1A;</p>
<ul>
<li><code>#define get_tls(r)  MOVQ TLS, r</code>&#x6765;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x5B8F;&#xFF1B;</li>
<li><code>#include &quot;textflag.h&quot;</code>&#x6765;&#x5F15;&#x7528;&#x4E00;&#x4E2A;<strong>&#x5916;&#x90E8;&#x5B8F;&#x5B9A;&#x4E49;&#x6587;&#x4EF6;</strong>&#x3002;</li>
</ul>
<p>go&#x7F16;&#x8BD1;&#x5668;&#x4E3A;&#x4E86;&#x65B9;&#x4FBF;&#x6C47;&#x7F16;&#x4E2D;&#x8BBF;&#x95EE;struct&#x7684;&#x6307;&#x5B9A;&#x5B57;&#x6BB5;&#xFF0C;&#x4F1A;&#x5728;&#x7F16;&#x8BD1;&#x8FC7;&#x7A0B;&#x4E2D;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x4E00;&#x4E2A;go_asm.h&#x6587;&#x4EF6;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;#include &quot;go_asm.h&quot;&#x8BED;&#x8A00;&#x6765;&#x5F15;&#x7528;&#xFF0C;&#x8BE5;&#x6587;&#x4EF6;&#x4E2D;&#x4F1A;&#x751F;&#x6210;&#x8BE5;&#x5305;&#x5185;&#x5168;&#x90E8;struct&#x7684;&#x6BCF;&#x4E2A;&#x5B57;&#x6BB5;&#x7684;&#x504F;&#x79FB;&#x91CF;&#x5B8F;&#x5B9A;&#x4E49;&#x4E0E;&#x7ED3;&#x6784;&#x4F53;&#x5927;&#x5C0F;&#x7684;&#x5B8F;&#x5B9A;&#x4E49;&#xFF0C;&#x6BD4;&#x5982;&#xFF1A;</p>
<pre><code class="lang-go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">type</span> testiMacio <span class="hljs-keyword">struct</span> {
    begin <span class="hljs-keyword">string</span>
    v1 <span class="hljs-keyword">uint32</span>
    v2 <span class="hljs-keyword">uint32</span>
    v3 <span class="hljs-keyword">int32</span>
}
</code></pre>
<ul>
<li><p><code>go tool compile -S -asmhdr dump.h *.go</code></p>
</li>
<li><p>&#x751F;&#x6210;dump.h&#x6587;&#x4EF6;</p>
</li>
</ul>
<pre><code class="lang-go"><span class="hljs-comment">// generated by compile -asmhdr from package main</span>

#define testiMacio__size <span class="hljs-number">32</span>
#define testiMacio_begin <span class="hljs-number">0</span>
#define testiMacio_v1 <span class="hljs-number">16</span>
#define testiMacio_v2 <span class="hljs-number">20</span>
#define testiMacio_v3 <span class="hljs-number">24</span>
</code></pre>
<h4 id="mmorebufgobufpcregister"><a name="mmorebufgobufpcregister" class="anchor-navigation-ex-anchor" href="#mmorebufgobufpcregister"><i class="fa fa-link" aria-hidden="true"></i></a>(m_morebuf+gobuf_pc)(REGISTER)</h4>
<pre><code class="lang-go">    MOVQ    <span class="hljs-number">8</span>(SP), AX    <span class="hljs-comment">// f&apos;s caller&apos;s PC</span>
    MOVQ    AX, (m_morebuf+gobuf_pc)(BX)
</code></pre>
<p><a href="https://github.com/zput/go/blob/5622128a77b4af5e5dc02edf53ecac545e3af730/src/runtime/runtime2.go#L452" target="_blank">runtime.m</a>
<a href="https://github.com/zput/go/blob/5622128a77b4af5e5dc02edf53ecac545e3af730/src/runtime/runtime2.go#L302" target="_blank">runtime.gobuf</a></p>
<pre><code class="lang-go"><span class="hljs-keyword">type</span> m <span class="hljs-keyword">struct</span> {
    g0      *g     <span class="hljs-comment">// goroutine with scheduling stack</span>
    morebuf gobuf  <span class="hljs-comment">// gobuf arg to morestack   //-----------morebuf-------------//</span>
    divmod  <span class="hljs-keyword">uint32</span> <span class="hljs-comment">// div/mod denominator for arm - known to liblink</span>
    <span class="hljs-comment">//...</span>
}

<span class="hljs-keyword">type</span> gobuf <span class="hljs-keyword">struct</span> {
    <span class="hljs-comment">// The offsets of sp, pc, and g are known to (hard-coded in) libmach.</span>
    <span class="hljs-comment">//</span>
    <span class="hljs-comment">// ctxt is unusual with respect to GC: it may be a</span>
    <span class="hljs-comment">// heap-allocated funcval, so GC needs to track it, but it</span>
    <span class="hljs-comment">// needs to be set and cleared from assembly, where it&apos;s</span>
    <span class="hljs-comment">// difficult to have write barriers. However, ctxt is really a</span>
    <span class="hljs-comment">// saved, live register, and we only ever exchange it between</span>
    <span class="hljs-comment">// the real register and the gobuf. Hence, we treat it as a</span>
    <span class="hljs-comment">// root during stack scanning, which means assembly that saves</span>
    <span class="hljs-comment">// and restores it doesn&apos;t need write barriers. It&apos;s still</span>
    <span class="hljs-comment">// typed as a pointer so that any other writes from Go get</span>
    <span class="hljs-comment">// write barriers.</span>
    sp   <span class="hljs-keyword">uintptr</span>
    pc   <span class="hljs-keyword">uintptr</span>   <span class="hljs-comment">// &lt;&lt;&lt;--- </span>
    g    guintptr
    ctxt unsafe.Pointer
    ret  sys.Uintreg
    lr   <span class="hljs-keyword">uintptr</span>
    bp   <span class="hljs-keyword">uintptr</span> <span class="hljs-comment">// for GOEXPERIMENT=framepointer</span>
}
</code></pre>
<p>&#x6211;&#x4EEC;&#x4ECE;&#x8FD9;&#x4E2A;<code>m_morebuf+gobuf_pc</code>&#x5C31;&#x77E5;&#x9053;&#x6307;&#x7684;&#x662F;&#x8FD9;&#x4E2A;m&#x7ED3;&#x6784;&#x4F53;&#x4E2D;&#x7684;morebuf&#x7ED3;&#x6784;&#x4F53;&#x5B57;&#x6BB5;&#x4E2D;&#x7684;pc&#x503C;&#x3002;</p>
<p><a href="https://github.com/zput/go/blob/5622128a77b4af5e5dc02edf53ecac545e3af730/src/runtime/runtime2.go#L387" target="_blank">runtime.g</a></p>
<h2 id="buildin&#x7C7B;&#x578B;"><a name="buildin&#x7C7B;&#x578B;" class="anchor-navigation-ex-anchor" href="#buildin&#x7C7B;&#x578B;"><i class="fa fa-link" aria-hidden="true"></i></a>1.5. buildin&#x7C7B;&#x578B;</h2>
<h3 id="string"><a name="string" class="anchor-navigation-ex-anchor" href="#string"><i class="fa fa-link" aria-hidden="true"></i></a>1.5.1. string</h3>
<pre><code class="lang-go"><span class="hljs-keyword">package</span> main

<span class="hljs-comment">//go:noinline</span>
<span class="hljs-keyword">func</span> exploreStringStruct(s <span class="hljs-keyword">string</span>) {}

<span class="hljs-keyword">func</span> main() {
    <span class="hljs-keyword">var</span> x = <span class="hljs-string">&quot;abcd-efg&quot;</span>
    exploreStringStruct(x)
}
</code></pre>
<ul>
<li><code>go tool compile -N -S main.go</code></li>
</ul>
<pre><code class="lang-sh">    0x001d 00029 (main.go:7)    LEAQ    go.string.<span class="hljs-string">&quot;abcd-efg-&#x4E2D;&quot;</span>(SB), AX
    0x0024 00036 (main.go:7)    MOVQ    AX, <span class="hljs-string">&quot;&quot;</span>.x+16(SP)
    0x0029 00041 (main.go:7)    MOVQ    <span class="hljs-variable">$12</span>, <span class="hljs-string">&quot;&quot;</span>.x+24(SP)
    0x0032 00050 (main.go:8)    PCDATA    <span class="hljs-variable">$0</span>, <span class="hljs-variable">$0</span>
    0x0032 00050 (main.go:8)    MOVQ    AX, (SP)
    0x0036 00054 (main.go:8)    MOVQ    <span class="hljs-variable">$12</span>, 8(SP)
    0x003f 00063 (main.go:8)    CALL    <span class="hljs-string">&quot;&quot;</span>.exploreStringStruct(SB)
</code></pre>
<ul>
<li><code>go build main.go</code></li>
<li><code>go tool objdump main  |grep main.go</code></li>
</ul>
<pre><code class="lang-sh">  main.go:8        0x4525<span class="hljs-built_in">cd</span>        488d0581190200        LEAQ 0x21981(IP), AX
  main.go:8        0x4525d4        48890424        MOVQ AX, 0(SP)
  main.go:8        0x4525d8        48c74424080c000000    MOVQ <span class="hljs-variable">$0xc</span>, 0x8(SP)
  main.go:8        0x4525e1        e8baffffff        CALL main.exploreStringStruct(SB)
</code></pre>
<p>go&#x91CC;&#x9762;&#x5B57;&#x7B26;&#x4E32;&#x662F;:&#x4E00;&#x4E2A;&#x6307;&#x9488;&#xFF0C;&#x4E00;&#x4E2A;&#x8868;&#x793A;&#x5B57;&#x8282;&#x5927;&#x5C0F;&#x7684;&#x5B57;&#x6BB5;;</p>
<h2 id="&#x9644;&#x5F55;"><a name="&#x9644;&#x5F55;" class="anchor-navigation-ex-anchor" href="#&#x9644;&#x5F55;"><i class="fa fa-link" aria-hidden="true"></i></a>1.6. &#x9644;&#x5F55;</h2>
<p><a href="https://xargin.com/plan9-assembly/" target="_blank">https://xargin.com/plan9-assembly/</a>
<a href="https://github.com/cch123/golang-notes/blob/master/assembly.md" target="_blank">https://github.com/cch123/golang-notes/blob/master/assembly.md</a>
<a href="https://lrita.github.io/images/posts/go/GoFunctionsInAssembly.pdf" target="_blank">https://lrita.github.io/images/posts/go/GoFunctionsInAssembly.pdf</a></p>
<p>&#x51FD;&#x6570;&#x58F0;&#x660E;,&#x8DF3;&#x8F6C;;</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../" class="navigation navigation-prev " aria-label="Previous page: 大纲">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="1.汇编基础.html" class="navigation navigation-next " aria-label="Next page: 汇编基础">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"第一部分 基础知识","date":"2019-02-28T15:03:00.000Z","tags":["golang","goroutine"],"categories":["golang调度"],"toc":true,"level":"1.3","depth":1,"next":{"title":"汇编基础","level":"1.3.1","depth":2,"path":"part0.基础知识/1.汇编基础.md","ref":"part0.基础知识/1.汇编基础.md","articles":[]},"previous":{"title":"大纲","level":"1.2","depth":1,"path":"index.md","ref":"index.md","articles":[]},"dir":"ltr"},"config":{"plugins":["-page-toc-button","-toc2","anchor-navigation-ex"],"styles":{"website":"./styles/website.css"},"pluginsConfig":{"search":{},"toc2":{"addClass":true,"className":"toc"},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"anchor-navigation-ex":{"associatedWithSummary":true,"float":{"floatIcon":"fa fa-navicon","level1Icon":"fa fa-hand-o-right","level2Icon":"fa fa-hand-o-right","level3Icon":"fa fa-hand-o-right","showLevelIcon":false},"mode":"float","multipleH1":true,"pageTop":{"level1Icon":"fa fa-hand-o-right","level2Icon":"fa fa-hand-o-right","level3Icon":"fa fa-hand-o-right","showLevelIcon":false},"printLog":false,"showGoTop":true,"showLevel":true},"page-toc-button":{"maxTocDepth":2,"minTocSize":2},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","author":"zput","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"golang goroutine详解","language":"zh-hans","links":{"sidebar":{"zput|堆排序":"https://zput.github.io"}},"gitbook":"3.2.3","description":"select * from learn"},"file":{"path":"part0.基础知识/1.汇编基础.md","mtime":"2021-03-28T09:04:44.792Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-03-28T09:05:35.583Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

